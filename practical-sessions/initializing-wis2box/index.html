
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="WIS2 in a box (wis2box) is a Free and Open Source (FOSS) Reference Implementation of a WMO WIS2 Node. The project provides a plug and play toolset to ingest, process, and publish weather/climate/water data using standards-based approaches in alignment with the WIS2 principles. wis2box also provides access to all data in the WIS2 network. wis2box is designed to have a low barrier to entry for data providers, providing enabling infrastructure and services for data discovery, access, and visualization.">
      
      
        <meta name="author" content="World Meteorological Organization">
      
      
        <link rel="canonical" href="https://amrabouelenin.github.io/wis2docs-claude/practical-sessions/initializing-wis2box/">
      
      
        <link rel="prev" href="../accessing-your-student-vm/">
      
      
        <link rel="next" href="../configuring-wis2box-datasets/">
      
      
      <link rel="icon" href="https://public.wmo.int/sites/all/themes/wmo/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>Initializing wis2box - WIS2 in a box training</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#initializing-wis2box" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="WIS2 in a box training" class="md-header__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../assets/img/wmo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WIS2 in a box training
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Initializing wis2box
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../it/practical-sessions/initializing-wis2box/" hreflang="it" class="md-select__link">
              Italiano
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../de/practical-sessions/initializing-wis2box/" hreflang="de" class="md-select__link">
              Deutsch
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="WIS2 in a box training" class="md-nav__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../assets/img/wmo-logo.png" alt="logo">

    </a>
    WIS2 in a box training
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Practical sessions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Practical sessions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connecting-to-wis2-over-mqtt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Connecting to WIS2 over MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accessing-your-student-vm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accessing your student VM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Initializing wis2box
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Initializing wis2box
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Preparation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-initial-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the initial configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating the initial configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wis2box-host-data-directory" class="md-nav__link">
    <span class="md-ellipsis">
      wis2box-host-data directory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wis2box-url" class="md-nav__link">
    <span class="md-ellipsis">
      wis2box URL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webapp-storage-and-broker-passwords" class="md-nav__link">
    <span class="md-ellipsis">
      WEBAPP, STORAGE and BROKER passwords
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#review-wis2boxenv" class="md-nav__link">
    <span class="md-ellipsis">
      Review wis2box.env
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-wis2box" class="md-nav__link">
    <span class="md-ellipsis">
      Start wis2box
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wis2box-api" class="md-nav__link">
    <span class="md-ellipsis">
      wis2box API
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wis2box-webapp" class="md-nav__link">
    <span class="md-ellipsis">
      wis2box webapp
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wis2box-broker" class="md-nav__link">
    <span class="md-ellipsis">
      wis2box-broker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minio-ui" class="md-nav__link">
    <span class="md-ellipsis">
      MinIO UI
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MinIO UI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-minio-ui-to-test-data-ingestion" class="md-nav__link">
    <span class="md-ellipsis">
      Using the MinIO UI to test data ingestion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grafana-ui" class="md-nav__link">
    <span class="md-ellipsis">
      Grafana UI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-wis2box-datasets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring datasets in wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-station-metadata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring station metadata
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../monitoring-wis2-notifications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring WIS2 notifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../converting-synop-data-to-bufr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Converting SYNOP data to BUFR from the command line
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../converting-synop-data-to-bufr-form/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Converting SYNOP data to BUFR using the wis2box-webapp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../converting-csv-data-to-bufr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Converting CSV data to BUFR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../automating-data-ingestion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automating data ingestion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adding-gts-headers-to-wis2-notifications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adding GTS-headers to WIS2 notifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datasets-with-access-control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setting up a recommended dataset with access control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../downloading-data-from-wis2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Downloading data from WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../discovering-datasets-from-wis2-gdc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Discovering datasets from the WIS2 Global Discovery Catalogue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../querying-data-using-the-wis2box-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Querying data using the wis2box API
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cheatsheets
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Cheatsheets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/wis2box/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WIS2 in a box
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    csv2bufr templates
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            csv2bufr templates
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/aws-template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS hourly
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/daycli-template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DAYCLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Preparation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-initial-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the initial configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating the initial configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wis2box-host-data-directory" class="md-nav__link">
    <span class="md-ellipsis">
      wis2box-host-data directory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wis2box-url" class="md-nav__link">
    <span class="md-ellipsis">
      wis2box URL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webapp-storage-and-broker-passwords" class="md-nav__link">
    <span class="md-ellipsis">
      WEBAPP, STORAGE and BROKER passwords
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#review-wis2boxenv" class="md-nav__link">
    <span class="md-ellipsis">
      Review wis2box.env
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-wis2box" class="md-nav__link">
    <span class="md-ellipsis">
      Start wis2box
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wis2box-api" class="md-nav__link">
    <span class="md-ellipsis">
      wis2box API
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wis2box-webapp" class="md-nav__link">
    <span class="md-ellipsis">
      wis2box webapp
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wis2box-broker" class="md-nav__link">
    <span class="md-ellipsis">
      wis2box-broker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minio-ui" class="md-nav__link">
    <span class="md-ellipsis">
      MinIO UI
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MinIO UI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-minio-ui-to-test-data-ingestion" class="md-nav__link">
    <span class="md-ellipsis">
      Using the MinIO UI to test data ingestion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grafana-ui" class="md-nav__link">
    <span class="md-ellipsis">
      Grafana UI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="initializing-wis2box">Initializing wis2box</h1>
<div class="admonition abstract">
<p class="admonition-title">Learning outcomes</p>
<p>By the end of this practical session, you will be able to:</p>
<ul>
<li>run the <code>wis2box-create-config.py</code> script to create the initial configuration</li>
<li>start wis2box and check the status of its components</li>
<li>access the <strong>wis2box-webapp</strong>, API, MinIO UI and Grafana dashboard in a browser</li>
<li>connect to the local <strong>wis2box-broker</strong> using MQTT Explorer</li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The current training materials are using wis2box-1.0.0rc1. </p>
<p>See <a href="../accessing-your-student-vm/">accessing-your-student-vm</a> for instructions on how to download and install the wis2box software stack if you are running this training outside of a local training session.</p>
</div>
<h2 id="preparation">Preparation</h2>
<p>Login to your designated VM with your username and password and ensure you are in the <code>wis2box-1.0.0rc1</code> directory:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box-1.0.0rc1
</code></pre></div>
<h2 id="creating-the-initial-configuration">Creating the initial configuration</h2>
<p>The initial configuration for the wis2box requires:</p>
<ul>
<li>an environment file <code>wis2box.env</code> containing the configuration parameters</li>
<li>a directory on the host-machine to share between the host machine and the wis2box containers defined by the <code>WIS2BOX_HOST_DATADIR</code> environment variable</li>
</ul>
<p>The <code>wis2box-create-config.py</code> script can be used to create the initial configuration of your wis2box. </p>
<p>It will ask you a set of question to help setup your configuration.</p>
<p>You will be able to review and update the configuration files after the script has completed.</p>
<p>Run the script as follows:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-create-config.py
</code></pre></div>
<h3 id="wis2box-host-data-directory">wis2box-host-data directory</h3>
<p>The script will ask you to enter the directory to be used for the <code>WIS2BOX_HOST_DATADIR</code> environment variable.</p>
<p>Note that you need to define the full path to this directory.</p>
<p>For example if your username is <code>username</code>, the full path to the directory is <code>/home/username/wis2box-data</code>:</p>
<div class="highlight"><pre><span></span><code>username@student-vm-username:~/wis2box-1.0.0rc1$ python3 wis2box-create-config.py
Please enter the directory to be used for WIS2BOX_HOST_DATADIR:
/home/username/wis2box-data
The directory to be used for WIS2BOX_HOST_DATADIR will be set to:
    /home/username/wis2box-data
Is this correct? (y/n/exit)
y
The directory /home/username/wis2box-data has been created.
</code></pre></div>
<h3 id="wis2box-url">wis2box URL</h3>
<p>Next, you will be asked to enter the URL for your wis2box. This is the URL that will be used to access the wis2box web application, API and UI.</p>
<p>Please use <code>http://&lt;your-hostname-or-ip&gt;</code> as the URL.</p>
<div class="highlight"><pre><span></span><code>Please enter the URL of the wis2box:
 For local testing the URL is http://localhost
 To enable remote access, the URL should point to the public IP address or domain name of the server hosting the wis2box.
http://username.wis2.training
The URL of the wis2box will be set to:
  http://username.wis2.training
Is this correct? (y/n/exit)
</code></pre></div>
<h3 id="webapp-storage-and-broker-passwords">WEBAPP, STORAGE and BROKER passwords</h3>
<p>You can use the option of random password generation when prompted for and <code>WIS2BOX_WEBAPP_PASSWORD</code>, <code>WIS2BOX_STORAGE_PASSWORD</code>, <code>WIS2BOX_BROKER_PASSWORD</code> and define your own.</p>
<p>Don't worry about remembering these passwords, they will be stored in the <code>wis2box.env</code> file in your wis2box-1.0.0rc1 directory.</p>
<h3 id="review-wis2boxenv">Review <code>wis2box.env</code></h3>
<p>Once the scripts is completed check the contents of the <code>wis2box.env</code> file in your current directory:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>~/wis2box-1.0.0rc1/wis2box.env
</code></pre></div>
<p>Or check the content of the file via WinSCP.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What is the value of WISBOX_BASEMAP_URL in the wis2box.env file?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>The default value for WIS2BOX_BASEMAP_URL is <code>https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png</code>.</p>
<p>This URL refers to the OpenStreetMap tile server. If you want to use a different map provider, you can change this URL to point to a different tile server.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What is the value of the WIS2BOX_STORAGE_DATA_RETENTION_DAYS environment variable in the wis2box.env file?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>The default value for WIS2BOX_STORAGE_DATA_RETENTION_DAYS is 30 days. You can change this value to a different number of days if you wish.</p>
<p>The wis2box-management container runs a cronjob on a daily basis to remove data older than the number of days defined by WIS2BOX_STORAGE_DATA_RETENTION_DAYS from the <code>wis2box-public</code> bucket and the API backend:</p>
<div class="highlight"><pre><span></span><code>0 0 * * * su wis2box -c &quot;wis2box data clean --days=$WIS2BOX_STORAGE_DATA_RETENTION_DAYS&quot;
</code></pre></div>
</details>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>wis2box.env</code> file contains environment variables defining the configuration of your wis2box. For more information consult the <a href="https://docs.wis2box.wis.wmo.int/en/latest/reference/configuration.html">wis2box-documentation</a>.</p>
<p>Do not edit the <code>wis2box.env</code> file unless you are sure of the changes you are making. Incorrect changes can cause your wis2box to stop working.</p>
<p>Do not share the contents of your <code>wis2box.env</code> file with anyone, as it contains sensitive information such as passwords.</p>
</div>
<h2 id="start-wis2box">Start wis2box</h2>
<p>Ensure you are in the directory containing the wis2box software stack definition files:</p>
<div class="highlight"><pre><span></span><code>cd ~/wis2box-1.0.0rc1
</code></pre></div>
<p>Start wis2box with the following command:</p>
<div class="highlight"><pre><span></span><code>python3 wis2box-ctl.py start
</code></pre></div>
<p>When running this command for the first time, you will see the following output:</p>
<div class="highlight"><pre><span></span><code>No docker-compose.images-*.yml files found, creating one
Current version=Undefined, latest version=1.0.0rc1
Would you like to update ? (y/n/exit)
</code></pre></div>
<p>Select <code>y</code> and the the script will create the file <code>docker-compose.images-1.0.0rc1.yml</code>, download the required Docker images and start the services.</p>
<p>Downloading the images may take some time depending on your internet connection speed. This step is only required the first time you start wis2box.</p>
<p>Inspect the status with the following command:</p>
<div class="highlight"><pre><span></span><code>python3 wis2box-ctl.py status
</code></pre></div>
<p>Repeat this command until all services are up and running.</p>
<div class="admonition note">
<p class="admonition-title">wis2box and Docker</p>
<p>wis2box runs as a set of Docker containers managed by docker-compose.</p>
<p>The services are defined in the various <code>docker-compose*.yml</code> which can be found in the <code>~/wis2box-1.0.0rc1/</code> directory.</p>
<p>The Python script <code>wis2box-ctl.py</code> is used to run the underlying Docker Compose commands that control the wis2box services.</p>
<p>You don't need to know the details of the Docker containers to run the wis2box software stack, but you can inspect the <code>docker-compose*.yml</code> and files to see how the services are defined. If you are interested in learning more about Docker, you can find more information in the <a href="https://docs.docker.com/">Docker documentation</a>.</p>
</div>
<p>To login to the wis2box-management container, use the following command:</p>
<div class="highlight"><pre><span></span><code>python3 wis2box-ctl.py login
</code></pre></div>
<p>Inside the wis2box-management container you can run various commands to manage your wis2box, such as:</p>
<ul>
<li><code>wis2box auth add-token --path processes/wis2box</code> : to create an authorization token for the <code>processes/wis2box</code> endpoint</li>
<li><code>wis2box data clean --days=&lt;number-of-days&gt;</code> : to clean up data older than a certain number of days from the <code>wis2box-public</code> bucket</li>
</ul>
<p>To exit the container and go back to the host machine, use the following command:</p>
<div class="highlight"><pre><span></span><code>exit
</code></pre></div>
<p>Run the following command to see the docker containers running on your host machine:</p>
<div class="highlight"><pre><span></span><code>docker ps
</code></pre></div>
<p>You should see the following containers running:</p>
<ul>
<li>wis2box-management</li>
<li>wis2box-api</li>
<li>wis2box-minio</li>
<li>wis2box-webapp</li>
<li>wis2box-auth</li>
<li>wis2box-ui</li>
<li>wis2downloader</li>
<li>elasticsearch</li>
<li>elasticsearch-exporter</li>
<li>nginx</li>
<li>mosquitto</li>
<li>prometheus</li>
<li>grafana</li>
<li>loki</li>
</ul>
<p>These containers are part of the wis2box software stack and provide the various services required to run the wis2box.</p>
<p>Run the following command to see the docker volumes running on your host machine:</p>
<div class="highlight"><pre><span></span><code>docker volume ls
</code></pre></div>
<p>You should see the following volumes:</p>
<ul>
<li>wis2box_project_auth-data</li>
<li>wis2box_project_es-data</li>
<li>wis2box_project_htpasswd</li>
<li>wis2box_project_minio-data</li>
<li>wis2box_project_prometheus-data</li>
<li>wis2box_project_loki-data</li>
</ul>
<p>As well as some anonymous volumes used by the various containers.</p>
<p>The volumes starting with <code>wis2box_project_</code> are used to store persistent data for the various services in the wis2box software stack.</p>
<h2 id="wis2box-api">wis2box API</h2>
<p>The wis2box contains an API (Application Programming Interface) that provide data access and processes for interactive visualization, data transformation and publication.</p>
<p>Open a new tab and navigate to the page <code>http://&lt;your-host&gt;/oapi</code>.</p>
<p><img alt="wis2box-api.png" src="../../assets/img/wis2box-api.png" width="800"></p>
<p>This is the landing page of the wis2box API (running via the <strong>wis2box-api</strong> container).</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What collections are currently available?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>To view collections currently available through the API, click <code>View the collections in this service</code>:</p>
<p><img alt="wis2box-api-collections.png" src="../../assets/img/wis2box-api-collections.png" width="600"></p>
<p>The following collections are currently available:</p>
<ul>
<li>Stations</li>
<li>Data notifications</li>
<li>Discovery metadata</li>
</ul>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>How many data notifications have been published?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>Click on "Data notifications", then click on <code>Browse through the items of "Data Notifications"</code>. </p>
<p>You will note that the page says "No items" as no Data notifications have been published yet.</p>
</details>
<h2 id="wis2box-webapp">wis2box webapp</h2>
<p>Open a web browser and visit the page <code>http://&lt;your-host&gt;/wis2box-webapp</code>.</p>
<p>You will see a pop-up asking for your username and password. Use the default username <code>wis2box-user</code> and the <code>WIS2BOX_WEBAPP_PASSWORD</code> defined in the <code>wis2box.env</code> file and click "Sign in":</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Check you wis2box.env for the value of your WIS2BOX_WEBAPP_PASSWORD. You can use the following command to check the value of this environment variable:</p>
<div class="highlight"><pre><span></span><code>cat ~/wis2box-1.0.0rc1/wis2box.env | grep WIS2BOX_WEBAPP_PASSWORD
</code></pre></div>
</div>
<p>Once logged in, you move your mouse to the menu on the left to see the options available in the wis2box web application:</p>
<p><img alt="wis2box-webapp-menu.png" src="../../assets/img/wis2box-webapp-menu.png" width="400"></p>
<p>This is the wis2box web application to enable you to interact with your wis2box:</p>
<ul>
<li>create and manage datasets</li>
<li>update/review your station metadata</li>
<li>ingest ASCII and CSV data</li>
<li>monitor notifications published on your wis2box-broker</li>
</ul>
<p>We will use this web application in a later session.</p>
<h2 id="wis2box-broker">wis2box-broker</h2>
<p>Open the MQTT Explorer on your computer and prepare a new connection to connect to your broker (running via the <strong>wis2box-broker</strong> container).</p>
<p>Click <code>+</code> to add a new connection:</p>
<p><img alt="mqtt-explorer-new-connection.png" src="../../assets/img/mqtt-explorer-new-connection.png" width="300"></p>
<p>You can click on the 'ADVANCED' button and verify you have subscriptions to the the following topics:</p>
<ul>
<li><code>#</code></li>
<li><code>$SYS/#</code></li>
</ul>
<p><img alt="mqtt-explorer-topics.png" src="../../assets/img/mqtt-explorer-topics.png" width="550"></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>#</code> topic is a wildcard subscription that will subscribe to all topics published on the broker.</p>
<p>The messages published under the <code>$SYS</code> topic are system messages published by the mosquitto service itself.</p>
</div>
<p>Use the following connection details, making sure to replace the value of <code>&lt;your-host&gt;</code> with your hostname and <code>&lt;WIS2BOX_BROKER_PASSWORD&gt;</code> with the value from your <code>wis2box.env</code> file:</p>
<ul>
<li><strong>Protocol: mqtt://</strong></li>
<li><strong>Host: <code>&lt;your-host&gt;</code></strong></li>
<li><strong>Port: 1883</strong></li>
<li><strong>Username: wis2box</strong></li>
<li><strong>Password: <code>&lt;WIS2BOX_BROKER_PASSWORD&gt;</code></strong></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can check your wis2box.env for the value of your WIS2BOX_BROKER_PASSWORD. You can use the following command to check the value of this environment variable:</p>
<div class="highlight"><pre><span></span><code>cat ~/wis2box-1.0.0rc1/wis2box.env | grep WIS2BOX_BROKER_PASSWORD
</code></pre></div>
<p>Note that this your <strong>internal</strong> broker password, the Global Broker will use different (read-only) credentials to subscribe to your broker. Never share this password with anyone.</p>
</div>
<p>Make sure to click "SAVE" to store your connection details.</p>
<p>Then click "CONNECT" to connect to your <strong>wis2box-broker</strong>.</p>
<p><img alt="mqtt-explorer-wis2box-broker.png" src="../../assets/img/mqtt-explorer-wis2box-broker.png" width="600"></p>
<p>Once you are connected, verify that your the internal mosquitto statistics being published by your broker under the <code>$SYS</code> topic:</p>
<p><img alt="mqtt-explorer-sys-topic.png" src="../../assets/img/mqtt-explorer-sys-topic.png" width="400"></p>
<p>Keep the MQTT Explorer open, as we will use it to monitor the messages published on the broker.</p>
<h2 id="minio-ui">MinIO UI</h2>
<p>Open a web browser and visit the page <code>http://&lt;your-host&gt;:9001</code>:</p>
<p><img alt="minio-ui.png" src="../../assets/img/minio-ui.png" width="400"></p>
<p>This is the MinIO UI (running via the <strong>wis2box-storage</strong> container).</p>
<p>The username and password are defined in the <code>wis2box.env</code> file in your wis2box data directory by the environment variables <code>WIS2BOX_STORAGE_USERNAME</code> and <code>WIS2BOX_STORAGE_PASSWORD</code>. The default username is <code>wis2box</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can check your wis2box.env for the value of your WIS2BOX_STORAGE_PASSWORD. You can use the following command to check the value of this environment variable:</p>
<div class="highlight"><pre><span></span><code>cat ~/wis2box-1.0.0rc1/wis2box.env | grep WIS2BOX_STORAGE_PASSWORD
</code></pre></div>
<p>Note that these are the read-write credentials for your MinIO instance. Never share these credentials with anyone. The Global Services can only download data from your MinIO instance using the web-proxy on the wis2box-public bucket.</p>
</div>
<p>Try to login to your MinIO UI. You will see that there 3 buckets already defined:</p>
<ul>
<li><code>wis2box-incoming</code>: used to receive incoming data</li>
<li><code>wis2box-public</code>: used to store data that is made available in the WIS2 notifications, the content of this bucket is proxied as <code>/data</code> on your <code>WIS2BOX_URL</code> via the nginx container</li>
<li><code>wis2box-archive</code>: used to archive data from <code>wis2box-incoming</code> on a daily basis</li>
</ul>
<p><img alt="minio-ui-buckets.png" src="../../assets/img/wis2box-minio-buckets.png" width="800"></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <strong>wis2box-storage</strong> container (provided by MinIO) will send a notification on the <strong>wis2box-broker</strong> when data is received. The <strong>wis2box-management</strong> container is subscribed to all messages on <code>wis2box/#</code> and will receive these notifications, triggering the data plugins defined in the datasets.</p>
</div>
<h3 id="using-the-minio-ui-to-test-data-ingestion">Using the MinIO UI to test data ingestion</h3>
<p>First click on "browse" for the <code>wis2box-incoming</code> bucket, then click on "Create new path":</p>
<p><img alt="minio-ui-create-new-path.png" src="../../assets/img/minio-ui-create-new-path.png" width="800"></p>
<p>And enter the path <code>/testing/upload/</code>:</p>
<p><img alt="minio-ui-create-path.png" src="../../assets/img/minio-ui-create-path.png" width="600"></p>
<p>Right-click on this link and select 'save link as' : <a href="/sample-data/randomfile.txt">randomfile.txt</a>, to download the file to your local machine.</p>
<p>Then click on "Upload" and select the randomfile.txt you downloaded from your local machine and upload it to the <code>wis2box-incoming</code> bucket</p>
<p>You should now see the file in the <code>wis2box-incoming</code> bucket:</p>
<p><img alt="minio-ui-upload-file.png" src="../../assets/img/minio-ui-upload-file.png" width="700"></p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Did you see a message published on your MQTT broker in MQTT Explorer?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>If you are connected to your wis2box-broker, you should note that a message has been published on the <code>wis2box/storage</code> topic:</p>
<p><img alt="mqtt-explorer-wis2box-storage.png" src="../../assets/img/mqtt-explorer-wis2box-storage.png" width="600"></p>
<p>This is how MinIO informs the wis2box-management service that there is new data to process. </p>
<p>Note: this is <strong>not</strong> a WIS2 notification, but an internal message between components within the wis2box software stack.</p>
</details>
<p>The wis2box is not yet configured to process any files you upload, so the file will not be processed and no WIS2 notification will be published.</p>
<p>We will check the error message produced by the wis2box-management container in the Grafana dashboard in the next step.</p>
<h2 id="grafana-ui">Grafana UI</h2>
<p>Open a web browser and visit the page <code>http://&lt;your-host&gt;:3000</code>:</p>
<p><img alt="wis2box-grafana-ui.png" src="../../assets/img/wis2box-grafana-ui.png" width="800"></p>
<p>This is the Grafana UI, where you can view the wis2box workflow monitoring dashboard. You can also access the logs of the various containers in the wis2box software stack via the 'Explore' option in the menu.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Can you find the error message produced by the wis2box-management container when you uploaded the file to the <code>wis2box-incoming</code> bucket?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>You will should see an error message indicating that the wis2box could not process the file you uploaded.</p>
<p>This is expected as we have not yet configured any datasets in the wis2box, you will learn how to do this in the next practical session.</p>
</details>
<h2 id="conclusion">Conclusion</h2>
<div class="admonition success">
<p class="admonition-title">Congratulations!</p>
<p>In this practical session, you learned how to:</p>
<ul>
<li>run the <code>wis2box-create-config.py</code> script to create the initial configuration</li>
<li>start wis2box and check the status of its components</li>
<li>connect to the MQTT broker on your student-VM using MQTT Explorer</li>
<li>access the wis2box-UI, wis2box-webapp and wis2box-API in a browser</li>
<li>upload a file to the "wis2box-incoming"-bucket in the MinIO UI</li>
<li>view the Grafana dashboard to monitor the wis2box workflow</li>
</ul>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2023 World Meteorological Organization
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
    
  </body>
</html>