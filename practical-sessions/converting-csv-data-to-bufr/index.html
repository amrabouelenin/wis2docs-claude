
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="WIS2 in a box (wis2box) is a Free and Open Source (FOSS) Reference Implementation of a WMO WIS2 Node. The project provides a plug and play toolset to ingest, process, and publish weather/climate/water data using standards-based approaches in alignment with the WIS2 principles. wis2box also provides access to all data in the WIS2 network. wis2box is designed to have a low barrier to entry for data providers, providing enabling infrastructure and services for data discovery, access, and visualization.">
      
      
        <meta name="author" content="World Meteorological Organization">
      
      
        <link rel="canonical" href="https://amrabouelenin.github.io/wis2docs-claude/practical-sessions/converting-csv-data-to-bufr/">
      
      
        <link rel="prev" href="../converting-synop-data-to-bufr-form/">
      
      
        <link rel="next" href="../automating-data-ingestion/">
      
      
      <link rel="icon" href="https://public.wmo.int/sites/all/themes/wmo/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>Converting CSV data to BUFR - WIS2 in a box training</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#converting-csv-data-to-bufr" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="WIS2 in a box training" class="md-header__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../assets/img/wmo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WIS2 in a box training
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Converting CSV data to BUFR
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../it/practical-sessions/converting-csv-data-to-bufr/" hreflang="it" class="md-select__link">
              Italiano
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../de/practical-sessions/converting-csv-data-to-bufr/" hreflang="de" class="md-select__link">
              Deutsch
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="WIS2 in a box training" class="md-nav__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../assets/img/wmo-logo.png" alt="logo">

    </a>
    WIS2 in a box training
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Practical sessions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Practical sessions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connecting-to-wis2-over-mqtt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Connecting to WIS2 over MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accessing-your-student-vm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accessing your student VM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../initializing-wis2box/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Initializing wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-wis2box-datasets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring datasets in wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-station-metadata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring station metadata
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../monitoring-wis2-notifications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring WIS2 notifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../converting-synop-data-to-bufr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Converting SYNOP data to BUFR from the command line
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../converting-synop-data-to-bufr-form/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Converting SYNOP data to BUFR using the wis2box-webapp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Converting CSV data to BUFR
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Converting CSV data to BUFR
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Preparation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-1-using-csv2bufr-with-the-aws-template" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Using csv2bufr with the 'AWS' template
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exercise 1: Using csv2bufr with the &#39;AWS&#39; template">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#review-the-aws-example-input-data" class="md-nav__link">
    <span class="md-ellipsis">
      Review the aws-example input data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-the-example-file" class="md-nav__link">
    <span class="md-ellipsis">
      Update the example file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upload-the-data-to-minio-and-check-the-result" class="md-nav__link">
    <span class="md-ellipsis">
      Upload the data to MinIO and check the result
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-2-using-the-daycli-template" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2 - Using the 'DayCLI' template
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exercise 2 - Using the &#39;DayCLI&#39; template">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-wis2box-dataset-of-publishing-daycli-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a wis2box dataset of publishing DAYCLI messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#review-the-daycli-example-input-data" class="md-nav__link">
    <span class="md-ellipsis">
      Review the daycli-example input data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-the-example-file_1" class="md-nav__link">
    <span class="md-ellipsis">
      Update the example file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upload-the-data-to-minio-and-check-the-result_1" class="md-nav__link">
    <span class="md-ellipsis">
      Upload the data to MinIO and check the result
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-3-using-the-csv-form-in-wis2box-webapp-optional" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3 - using the CSV-form in wis2box-webapp (optional)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exercise 3 - using the CSV-form in wis2box-webapp (optional)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-csv-form-in-the-wis2box-web-application" class="md-nav__link">
    <span class="md-ellipsis">
      Using the CSV Form in the wis2box web-application
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-invalid-input-data" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging invalid input data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../automating-data-ingestion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automating data ingestion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adding-gts-headers-to-wis2-notifications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adding GTS-headers to WIS2 notifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datasets-with-access-control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setting up a recommended dataset with access control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../downloading-data-from-wis2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Downloading data from WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../discovering-datasets-from-wis2-gdc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Discovering datasets from the WIS2 Global Discovery Catalogue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../querying-data-using-the-wis2box-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Querying data using the wis2box API
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cheatsheets
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Cheatsheets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/wis2box/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WIS2 in a box
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    csv2bufr templates
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            csv2bufr templates
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/aws-template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS hourly
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/daycli-template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DAYCLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Preparation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-1-using-csv2bufr-with-the-aws-template" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Using csv2bufr with the 'AWS' template
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exercise 1: Using csv2bufr with the &#39;AWS&#39; template">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#review-the-aws-example-input-data" class="md-nav__link">
    <span class="md-ellipsis">
      Review the aws-example input data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-the-example-file" class="md-nav__link">
    <span class="md-ellipsis">
      Update the example file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upload-the-data-to-minio-and-check-the-result" class="md-nav__link">
    <span class="md-ellipsis">
      Upload the data to MinIO and check the result
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-2-using-the-daycli-template" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2 - Using the 'DayCLI' template
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exercise 2 - Using the &#39;DayCLI&#39; template">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-wis2box-dataset-of-publishing-daycli-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a wis2box dataset of publishing DAYCLI messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#review-the-daycli-example-input-data" class="md-nav__link">
    <span class="md-ellipsis">
      Review the daycli-example input data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-the-example-file_1" class="md-nav__link">
    <span class="md-ellipsis">
      Update the example file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upload-the-data-to-minio-and-check-the-result_1" class="md-nav__link">
    <span class="md-ellipsis">
      Upload the data to MinIO and check the result
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-3-using-the-csv-form-in-wis2box-webapp-optional" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3 - using the CSV-form in wis2box-webapp (optional)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exercise 3 - using the CSV-form in wis2box-webapp (optional)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-csv-form-in-the-wis2box-web-application" class="md-nav__link">
    <span class="md-ellipsis">
      Using the CSV Form in the wis2box web-application
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-invalid-input-data" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging invalid input data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="converting-csv-data-to-bufr">Converting CSV data to BUFR</h1>
<div class="admonition abstract">
<p class="admonition-title">Learning outcomes</p>
<p>By the end of this practical session, you will be able to:</p>
<ul>
<li>use the <strong>MinIO UI</strong> to upload input CSV data files and monitor the result</li>
<li>know the format for CSV data for use with the default automatic weather station BUFR template</li>
<li>use the dataset editor in the <strong>wis2box webapp</strong> to create a dataset for publishing DAYCLI messages</li>
<li>know the format for CSV data for use with the DAYCLI BUFR template</li>
<li>use <strong>wis2box webapp</strong> to validate and convert sample data for AWS stations to BUFR (optional)</li>
</ul>
</div>
<h2 id="introduction">Introduction</h2>
<p>Comma-separated values (CSV) data files are often used for recording observational and other data in a tabular format. 
Most data loggers used to record sensor output are able to export the observations in delimited files, including in CSV.
Similarly, when data are ingested into a database it is easy to export the required data in CSV formatted files. 
To aid the exchange of data originally stored in tabular data formats a CSV to BUFR converted has been implemented in 
the wis2box using the same software as for SYNOP to BUFR.</p>
<p>In this session you will learn about using csv2bufr converter in the wis2box for the following built-in templates:</p>
<ul>
<li><strong>AWS</strong> (aws-template.json) : Mapping template for converting CSV data from simplified automatic weather station file to BUFR sequence 301150, 307096"</li>
<li><strong>DayCLI</strong> (daycli-template.json) : Mapping template for converting daily climate CSV data to BUFR sequence 307075</li>
</ul>
<h2 id="preparation">Preparation</h2>
<p>Make sure the wis2box-stack has been started with <code>python3 wis2box.py start</code></p>
<p>Make sure that you have a web browser open with the MinIO UI for your instance by going to <code>http://&lt;your-host&gt;:9000</code>
If you don't remember your MinIO credentials, you can find them in the <code>wis2box.env</code> file in the <code>wis2box-1.0.0rc1</code> directory on your student VM.</p>
<p>Make sure that you have MQTT Explorer open and connected to your broker using the credentials <code>everyone/everyone</code>.</p>
<h2 id="exercise-1-using-csv2bufr-with-the-aws-template">Exercise 1: Using csv2bufr with the 'AWS' template</h2>
<p>The 'AWS' template provides a predefined mapping template to convert CSV data from AWS stations in support of the GBON reporting requirements. </p>
<p>The description of the AWS template can be found <a href="/csv2bufr-templates/aws-template">here</a>.</p>
<h3 id="review-the-aws-example-input-data">Review the aws-example input data</h3>
<p>Download the example for this exercise from the link below:</p>
<p><a href="/sample-data/aws-example.csv">aws-example.csv</a></p>
<p>Open the file you downloaded in an editor and inspect the content:</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Examining the date, time and identify fields (WIGOS and traditional identifiers) what do
you notice? How would today's date be represented?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>Each column contains a single piece of information. For example the date is split into
year, month and day, mirroring how the data are stored in BUFR. Todays date would be 
split across the columns "year", "month" and "day". Similarly, the time needs to be
split into "hour" and "minute" and the WIGOS station identifier into its respective components.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Looking at the data file how are missing data encoded?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>Missing data within the file are represented by empty cells. In a CSV file this would be
encoded by <code>,,</code>. Note that this is an empty cell and not encoded as a zero length string, 
e.g. <code>,"",</code>.</p>
</details>
<div class="admonition hint">
<p class="admonition-title">Missing data</p>
<p>It is recognized that data may be missing for a variety of reasons, whether due to sensor 
failure or the parameter not being observed. In these cases missing data can be encoded
as per the above answer, the other data in the report remain valid.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What are the WIGOS station identifiers for the stations reporting data in the example file? How is it defined in the input file?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>The WIGOS station identifier is defined by 4 separate columns in the file:</p>
<ul>
<li><strong>wsi_series</strong>: WIGOS identifier series</li>
<li><strong>wsi_issuer</strong>: WIGOS issuer of identifier</li>
<li><strong>wsi_issue_number</strong>: WIGOS issue number</li>
<li><strong>wsi_local</strong>: WIGOS local identifier</li>
</ul>
<p>The WIGOS station identifiers used in the example file are <code>0-20000-0-60351</code>, <code>0-20000-0-60355</code> and <code>0-20000-0-60360</code>.  </p>
</details>
<h3 id="update-the-example-file">Update the example file</h3>
<p>Update the example file you downloaded to use today's date and time and change the WIGOS station identifiers to use stations you have registered in the wis2box-webapp.</p>
<h3 id="upload-the-data-to-minio-and-check-the-result">Upload the data to MinIO and check the result</h3>
<p>Navigate to the MinIO UI and log in using the credentials from the <code>wis2box.env</code> file.</p>
<p>Navigate to the <strong>wis2box-incoming</strong> and click the button "Create new path":</p>
<p><img alt="Image showing MinIO UI with the create folder button highlighted" src="../../assets/img/minio-create-new-path.png"/></p>
<p>Create a new folder in the MinIO bucket that matches the dataset-id for the dataset you created with the template='weather/surface-weather-observations/synop':</p>
<p><img alt="Image showing MinIO UI with the create folder button highlighted" src="../../assets/img/minio-create-new-path-metadata_id.png"/></p>
<p>Upload the example file you downloaded to the folder you created in the MinIO bucket:</p>
<p><img alt="Image showing MinIO UI with aws-example uploaded" src="../../assets/img/minio-upload-aws-example.png"/></center></p>
<p>Check the Grafana dashboard at <code>http://&lt;your-host&gt;:3000</code> to see if there are any WARNINGS or ERRORS. If you see any, try to fix them and repeat the exercise.</p>
<p>Check the MQTT Explorer to see if you receive WIS2 data-notifications.</p>
<p>If you successfully ingested the data you should see 3 notifications in MQTT explorer on the topic <code>origin/a/wis2/&lt;centre-id&gt;/data/weather/surface-weather-observations/synop</code> for the 3 stations you reported data for:</p>
<p><img width="450" alt="Image showing MQTT explorer after uploading AWS" src="../../assets/img/mqtt-explorer-aws-upload.png"/></p>
<h2 id="exercise-2-using-the-daycli-template">Exercise 2 - Using the 'DayCLI' template</h2>
<p>In the previous exercise we used the dataset you created with Data-type='weather/surface-weather-observations/synop', which has pre-configured the CSV to BUFR conversion template to the AWS template.</p>
<p>In the next exercise we will use the 'DayCLI' template to convert daily climate data to BUFR.</p>
<p>The description of the DAYCLI template can be found <a href="/csv2bufr-templates/daycli-template">here</a>.</p>
<div class="admonition note">
<p class="admonition-title">About the DAYCLI template</p>
<p>Please note that the DAYCLI BUFR sequence will be updated during 2025 to include additional information and revised QC flags. The DAYCLI template included the wis2box will be updated to reflect these changes. WMO will communicate when the wis2box-software is updated to include the new DAYCLI template, to allow users to update their systems accordingly.</p>
</div>
<h3 id="creating-a-wis2box-dataset-of-publishing-daycli-messages">Creating a wis2box dataset of publishing DAYCLI messages</h3>
<p>Go to the dataset editor in the wis2box-webapp and create a new dataset. Use the same centre-id as in the previous practical sessions and select <strong>Data Type='climate/surface-based-observations/daily'</strong>:</p>
<p><img alt="Create a new dataset in the wis2box-webapp for DAYCLI" src="../../assets/img/wis2box-webapp-create-dataset-daycli.png"/></p>
<p>Click "CONTINUE TO FORM" and add a description for your dataset, set the bounding box and provide the contact information for the dataset. Once you are done filling out all the sections, click 'VALIDATE FORM' and check the form.</p>
<p>Review the data-plugins for the datasets. Click on "UPDATE" next to the plugin with name "CSV data converted to BUFR" and you will see the template is set to <strong>DayCLI</strong>:</p>
<p><img alt="Update the data plugin for the dataset to use the DAYCLI template" src="../../assets/img/wis2box-webapp-update-data-plugin-daycli.png"/></p>
<p>Close the plugin configuration and submit the form using the authentication token you created in the previous practical session.</p>
<p>You should know have a second dataset in the wis2box-webapp that is configured to use the DAYCLI template for converting CSV data to BUFR.</p>
<h3 id="review-the-daycli-example-input-data">Review the daycli-example input data</h3>
<p>Download the example for this exercise from the link below:</p>
<p><a href="/sample-data/daycli-example.csv">daycli-example.csv</a></p>
<p>Open the file you downloaded in an editor and inspect the content:</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What additional variables are included in the daycli template?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>The daycli template includes important metadata on the instrument siting and measurement quality classifications for temperature and humidity, quality control flags and information on how the daily average temperature has been calculated.</p>
</details>
<h3 id="update-the-example-file_1">Update the example file</h3>
<p>The example file contains one row of data for each day in a month, and reports data for one station. Update the example file you downloaded to use today's date and time and change the WIGOS station identifiers to use a station you have registered in the wis2box-webapp.</p>
<h3 id="upload-the-data-to-minio-and-check-the-result_1">Upload the data to MinIO and check the result</h3>
<p>As before, you will need to upload the data to the 'wis2box-incoming' bucket in MinIO to be processed by the csv2bufr converter. This time you will need to create a new folder in the MinIO bucket that matches the dataset-id for the dataset you created with the template='climate/surface-based-observations/daily' which will be different from the dataset-id you used in the previous exercise:</p>
<p><img alt="Image showing MinIO UI with DAYCLI-example uploaded" src="../../assets/img/minio-upload-daycli-example.png"/></center></p>
<p>After uploading the data check there are no WARNINGS or ERRORS in the Grafana dashboard and check the MQTT Explorer to see if you receive WIS2 data-notifications.</p>
<p>If you successfully ingested the data you should see 30 notifications in MQTT explorer on the topic <code>origin/a/wis2/&lt;centre-id&gt;/data/climate/surface-based-observations/daily</code> for the 30 days in the month you reported data for:</p>
<p><img width="450" alt="Image showing MQTT explorer after uploading DAYCLI" src="../../assets/img/mqtt-daycli-template-success.png"/></p>
<h2 id="exercise-3-using-the-csv-form-in-wis2box-webapp-optional">Exercise 3 - using the CSV-form in wis2box-webapp (optional)</h2>
<p>The wis2box web-application provides an interface for uploading CSV data and converting it to BUFR before publishing it to the WIS2, using the AWS template.</p>
<p>The use of this form is intended for debugging and validation purposes, the recommended submission method for publishing data from Automated Weather Stations is to a setup a process that automatically uploads the data to the MinIO bucket.</p>
<h3 id="using-the-csv-form-in-the-wis2box-web-application">Using the CSV Form in the wis2box web-application</h3>
<p>Navigate to CSV Form on the the wis2box web-application 
(<code>http://&lt;your-host-name&gt;/wis2box-webapp/csv2bufr_form</code>).
Use the file <a href="/sample-data/aws-example.csv">aws-example.csv</a> for this exercise.
You should now be able to click next to preview and validate the file.</p>
<p><center><img alt="Image showing CSV to BUFR upload screen" src="../../assets/img/csv2bufr-ex1.png"/></center></p>
<p>Clicking the next button loads the file into the browser and validates the contents against a predefined schema. 
No data has yet been converted or published.  On the preview / validate tab you should be presented with a list of warnings 
about missing data but in this exercise these can be ignored. </p>
<p><center><img alt="Image showing CSV to BUFR example validation page with warnings" src="../../assets/img/csv2bufr-warnings.png"/></center></p>
<p>Click <em>next</em> to proceed and you will be asked to provide a dataset-id for the data to be published. Select the dataset-id you create previously and click <em>next</em>.</p>
<p>You should now be on an authorization page where you will be asked to enter the <code>processes/wis2box</code> 
token you have previously created. Enter this token and click the "Publish on WIS2" toggle to ensure 
"Publish to WIS2" is selected (see screenshot below).</p>
<p><center><img alt="csv2bufr auth and publish screen" src="../../assets/img/csv2bufr-toggle-publish.png"/></center></p>
<p>Click next to transform to BUFR and publish, you should then see the following screen:</p>
<p><center><img alt="Image showing CSV to BUFR example success screen" src="../../assets/img/csv2bufr-success.png"/></center></p>
<p>Clicking the down arrow tn the right of  <code>Output BUFR files</code> should reveal the <code>Download</code> and <code>Inspect</code> buttons.
Click inspect to view the data and confirm the values are as expected.</p>
<p><center><img alt="Image showing CSV to BUFR inspect output" src="../../assets/img/csv2bufr-inspect.png"/></center></p>
<h3 id="debugging-invalid-input-data">Debugging invalid input data</h3>
<p>In this exercise we will examine what happens with invalid input data. Download the next example file by clicking the 
link below. This contains the same data as the first file but with the empty columns removed.
Examine the file and confirm which columns have been removed and then follow the same process to convert the data to BUFR.</p>
<p><a href="/sample-data/csv2bufr-ex3a.csv">csv2bufr-ex3a.csv</a></p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>With the columns missing from the file were you able to convert the data to BUFR?
Did you notice any change to the warnings on the validation page?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>You should have still been able to convert the data to BUFR but the warning messages will have been updated
to indicate that the columns were missing completely rather than containing a missing value.</p>
</details>
<p>In this next example an additional column has been added to the CSV file.</p>
<p><a href="/sample-data/csv2bufr-ex3b.csv">csv2bufr-ex3b.csv</a></p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Without uploading or submitting the file can you predict what will happen when you do?</p>
</div>
<p>Now upload and confirm whether your prediction was correct.</p>
<details class="success">
<summary>Click to reveal answer</summary>
<p>When the file is validated you should now receive a warning that the column <code>index</code>
is not found in the schema and that the data will be skipped. You should be able to click
through and convert to BUFR as with the previous example.</p>
</details>
<p>In the final example in this exercise the data has been modified. Examine the contents of the CSV file.</p>
<p><a href="/sample-data/csv2bufr-ex3c.csv">csv2bufr-ex3c.csv</a></p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What has changed in the file and what do you think will happen?</p>
</div>
<p>Now upload the file and confirm whether you were correct.</p>
<details class="warning">
<summary>Click to real answer</summary>
<p>The pressure fields have been converted from Pa to hPa in the input data. However, the CSV to BUFR
converter expects the same units as BUFR (Pa) and, as a result, these fields fail the validation due to being
out of range. You should be able to edit the CSV to correct the issue and to resubmit the data by
returning to the first screen and re-uploading.</p>
</details>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>The wis2box web-application can be used to test and validate sample data for the automated workflow. This will identify
some common issues, such as the incorrect units (hPa vs Pa and C vs K) and missing columns. Care should be taken 
that the units in the CSV data match those indicated above.</p>
</div>
<h2 id="conclusion">Conclusion</h2>
<div class="admonition success">
<p class="admonition-title">Congratulations</p>
<p>In this practical session you have learned:</p>
<ul>
<li>about the csv2bufr converter in the wis2box</li>
<li>how to use the AWS and DAYCLI templates to convert CSV data to BUFR</li>
<li>and how to validate a sample CSV file using the csv2bufr form in the wis2box web-application</li>
</ul>
</div>
<div class="admonition info">
<p class="admonition-title">Next steps</p>
<p>The csv2bufr converter used in the wis2box has been designed to be configurable for use with any row based 
tabular data. The column names, delimiters, quotation style and limited quality control can all be configured
according to user needs. In this session you have used the built-in AWS and daycli templates but you can develop
your own templates for other data types as required.</p>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2023 World Meteorological Organization
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
    
  </body>
</html>